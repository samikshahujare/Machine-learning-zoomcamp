# Pima Indians Diabetes Risk Prediction  
### ML Zoomcamp â€“ Capstone Project 1

This project implements an **end-to-end machine learning system** to predict the **probability of diabetes risk** using clinical health indicators.

The focus is on **production-grade ML engineering**, including:
- reproducible training
- model selection
- API-based inference
- Docker containerization
- cloud deployment on Render

---

## ğŸš€ Live Demo (Deployed on Render)

- **API Docs (Swagger UI):**  
  https://pima-diabetes-capstone.onrender.com/docs

Use the `/predict` endpoint to test predictions directly from the browser.

---

## ğŸ§  Problem Description

Early screening for diabetes helps prioritize preventive care and medical attention.  
Given routine, non-invasive health measurements, the goal is to estimate the **probability of diabetes**.

âš ï¸ This system is intended for **educational and screening purposes only** and **must not be used for medical diagnosis**.

---

## ğŸ“Š Dataset

**Pima Indians Diabetes Dataset**

- Rows: 768  
- Features: 8 numerical medical attributes  
- Target: `Outcome`  
  - `0` â†’ Non-diabetic  
  - `1` â†’ Diabetic  

### Features used for inference
- Pregnancies  
- Glucose  
- BloodPressure  
- SkinThickness  
- Insulin  
- BMI  
- DiabetesPedigreeFunction  
- Age  

---

## ğŸ” Exploratory Data Analysis (EDA)

EDA was performed to:
- inspect feature distributions
- analyze class imbalance
- identify zero-valued medical measurements
- examine feature correlations

The analysis revealed weak linear relationships and moderate class imbalance, motivating the use of **tree-based ensemble models**.

---

## ğŸ¤– Modeling Approach

A **Pareto-optimal strategy** was used (few strong models instead of many weak ones).

### Models trained
1. Logistic Regression (baseline, interpretable)  
2. Random Forest (non-linear baseline)  
3. Gradient Boosting / XGBoost (high-performance ensemble)

### Evaluation Metric
- **ROC-AUC**

The best-performing model is automatically selected and saved as a single artifact:

model.bin


---

## ğŸ“ Project Structure



capstone-1-pima-diabetes/
â”œâ”€â”€ data/
â”‚ â””â”€â”€ pima_data.csv
â”œâ”€â”€ notebooks/
â”‚ â””â”€â”€ Pima_Indians_Dataset_Capstone_1.ipynb
â”œâ”€â”€ train.py
â”œâ”€â”€ predict.py
â”œâ”€â”€ test.py
â”œâ”€â”€ model.bin
â”œâ”€â”€ pyproject.toml
â”œâ”€â”€ uv.lock
â”œâ”€â”€ Dockerfile
â””â”€â”€ README.md


This structure ensures **clarity, reproducibility, and deployability**.

---

## âš™ï¸ Environment & Dependencies

Dependency management is handled using **uv** for deterministic and locked environments.

### System Requirements
- Python â‰¥ 3.10  
- Git  
- Docker (for deployment)

---

## ğŸ› ï¸ Setup Instructions (Local)

### 1ï¸âƒ£ Clone the repository
```bash
git clone https://github.com/samikshahujare/Machine-learning-zoomcamp.git
cd Machine-learning-zoomcamp/capstone-1-pima-diabetes

2ï¸âƒ£ Install uv
pip install uv


Verify:

python -m uv --version

3ï¸âƒ£ Install dependencies
python -m uv sync


This installs all dependencies from uv.lock.

ğŸ‹ï¸ Model Training
python -m uv run python train.py


This will:

train multiple models

evaluate using ROC-AUC

select the best model

save it as model.bin

ğŸŒ Run the API Locally
Start FastAPI server
python -m uv run uvicorn predict:app --host 0.0.0.0 --port 9696

Available endpoints

POST /predict

Interactive API docs at:

http://localhost:9696/docs

Test the API
python -m uv run python test.py

ğŸ³ Docker Usage
Build Docker image
docker build -t pima-diabetes .

Run container
docker run -p 9696:9696 pima-diabetes


Then open:

http://localhost:9696/docs

â˜ï¸ Deployment on Render (Docker)
Steps

Go to Render â†’ New â†’ Web Service

Connect GitHub repository

Choose Docker as environment

Set Root Directory:

capstone-1-pima-diabetes


Set Port:

9696

Deploy

Render builds the Docker image and exposes a public API.
